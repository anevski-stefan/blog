<h1 class="fs-1 text-center mt-5">My Blogs</h1>

<div class="content-wrapper">
  <div class="categories">
    <h3>Categories:</h3>
    <% categories.forEach(category => {%>
    <p class="category"><%= category.name %></p>
    <%}); %>
  </div>
  <div class="blogs">
    <!-- Blogs listing -->
    <% if(blogs.length > 0) {%> <% blogs.forEach(blog => { %>
    <div class="blog-item">
      <div>
        <h1 class="blog-title"><%= blog.title.substring(0,30) %></h1>
        <div>
          <form method="get" action="/blogs/<%= blog.id %>/remove" class="mx-2">
            <button type="submit" class="btn btn-danger">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </form>
          <form method="get" action="/blogs/<%= blog.id %>/edit-form">
            <button type="submit" class="btn btn-primary">
              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
            </button>
          </form>
        </div>
      </div>
      <p>
        <span class="timestamp" data-createdAt="<%= blog.createdat %>"></span>
      </p>
      <p class="blog_category">Category: <%= blog.category_name %></p>
      <div class="actions">
        <a href="/blogs/<%= blog.id %>" class="btn btn-secondary mt-3"
          >Read the article</a
        >
      </div>
    </div>

    <% }); %> <%} else {%>
    <h1 class="no-blogs">No blogs to be shown.</h1>
    <%}%>
  </div>
  <div class="latest-posts">
    <h3>Latest posts:</h3>
    <% latest.forEach(blog => {%>
    <h6 class="blog"><a href="/blogs/<%= blog.id %>"><%= blog.title %></a></h6>
    <div class="d-flex">
      <p><%= blog.like_count %> likes and <%= blog.dislike_count %> dislikes</p>
    </div>
    <%}); %>
  </div>
</div>
<script>
  function removeSuccessMessage() {
    var successMessage = document.querySelector(".alert-success");
    if (successMessage) {
      setTimeout(function () {
        successMessage.remove();
      }, 3000);
    }
  }

  window.addEventListener("load", function () {
    removeSuccessMessage();
  });
</script>
